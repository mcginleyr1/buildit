{% extends "base.html" %} {% block title %}Deployment History - BuildIt{% endblock %} {% block nav_history
%}text-zinc-900 bg-zinc-100 dark:text-zinc-100 dark:bg-zinc-800{% endblock %} {% block breadcrumb %}
<span class="text-zinc-900 dark:text-zinc-100 font-medium">Deployment History</span>
{% endblock %} {% block content %}
<div class="space-y-6">
    <!-- Header -->
    <div>
        <h1 class="text-2xl font-semibold text-zinc-900 dark:text-zinc-100">Deployment History</h1>
        <p class="mt-1 text-sm text-zinc-500 dark:text-zinc-400">All deployments across environments</p>
    </div>

    <!-- Filters -->
    <div class="flex items-center gap-4">
        <select
            class="bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg px-3 py-2 text-sm text-zinc-900 dark:text-zinc-100"
        >
            <option>All environments</option>
            <option>development</option>
            <option>staging</option>
            <option>production</option>
        </select>
        <select
            class="bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg px-3 py-2 text-sm text-zinc-900 dark:text-zinc-100"
        >
            <option>All services</option>
        </select>
        <select
            class="bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg px-3 py-2 text-sm text-zinc-900 dark:text-zinc-100"
        >
            <option>All statuses</option>
            <option>Succeeded</option>
            <option>Failed</option>
            <option>In progress</option>
        </select>
    </div>

    <!-- Deployments table -->
    <div class="bg-white dark:bg-zinc-900 rounded-lg border border-zinc-200 dark:border-zinc-800 overflow-hidden">
        <table class="w-full">
            <thead class="bg-zinc-50 dark:bg-zinc-800/50">
                <tr>
                    <th
                        class="px-5 py-3 text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider"
                    >
                        Deployment
                    </th>
                    <th
                        class="px-5 py-3 text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider"
                    >
                        Service
                    </th>
                    <th
                        class="px-5 py-3 text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider"
                    >
                        Environment
                    </th>
                    <th
                        class="px-5 py-3 text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider"
                    >
                        Status
                    </th>
                    <th
                        class="px-5 py-3 text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider"
                    >
                        Deployed
                    </th>
                    <th
                        class="px-5 py-3 text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider"
                    >
                        Duration
                    </th>
                </tr>
            </thead>
            <tbody class="divide-y divide-zinc-200 dark:divide-zinc-800">
                {% for deploy in deployments %}
                <tr class="hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors">
                    <td class="px-5 py-4">
                        <div class="flex items-center gap-3">
                            {% if deploy.status == "succeeded" %}
                            <span class="w-2 h-2 rounded-full bg-green-500"></span>
                            {% else if deploy.status == "failed" %}
                            <span class="w-2 h-2 rounded-full bg-red-500"></span>
                            {% else %}
                            <span class="w-2 h-2 rounded-full bg-blue-500 animate-pulse"></span>
                            {% endif %}
                            <div>
                                <span class="text-sm font-medium text-zinc-900 dark:text-zinc-100"
                                    >{{ deploy.version }}</span
                                >
                                <p class="text-xs text-zinc-500 dark:text-zinc-400">{{ deploy.commit_sha }}</p>
                            </div>
                        </div>
                    </td>
                    <td class="px-5 py-4">
                        <span class="text-sm text-zinc-900 dark:text-zinc-100">{{ deploy.service_name }}</span>
                    </td>
                    <td class="px-5 py-4">
                        <span
                            class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400"
                        >
                            {{ deploy.environment }}
                        </span>
                    </td>
                    <td class="px-5 py-4">
                        {% if deploy.status == "succeeded" %}
                        <span
                            class="inline-flex items-center gap-1 text-xs font-medium text-green-600 dark:text-green-400"
                        >
                            <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M5 13l4 4L19 7"
                                />
                            </svg>
                            Succeeded
                        </span>
                        {% else if deploy.status == "failed" %}
                        <span class="inline-flex items-center gap-1 text-xs font-medium text-red-600 dark:text-red-400">
                            <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M6 18L18 6M6 6l12 12"
                                />
                            </svg>
                            Failed
                        </span>
                        {% else %}
                        <span
                            class="inline-flex items-center gap-1 text-xs font-medium text-blue-600 dark:text-blue-400"
                        >
                            <svg class="w-3.5 h-3.5 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
                                />
                            </svg>
                            In Progress
                        </span>
                        {% endif %}
                    </td>
                    <td class="px-5 py-4">
                        <span class="text-sm text-zinc-500 dark:text-zinc-400">{{ deploy.deployed_ago }}</span>
                    </td>
                    <td class="px-5 py-4">
                        <span class="text-sm text-zinc-500 dark:text-zinc-400">{{ deploy.duration }}</span>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    {% if !has_deployments %}
    <div class="bg-white dark:bg-zinc-900 rounded-lg border border-zinc-200 dark:border-zinc-800 p-12 text-center">
        <svg
            class="mx-auto h-12 w-12 text-zinc-400 dark:text-zinc-600"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
        >
            <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1"
                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
            />
        </svg>
        <h3 class="mt-4 text-sm font-medium text-zinc-900 dark:text-zinc-100">No deployments yet</h3>
        <p class="mt-2 text-sm text-zinc-500 dark:text-zinc-400">
            Deployments will appear here once you start deploying services.
        </p>
    </div>
    {% endif %}
</div>
{% endblock %}
